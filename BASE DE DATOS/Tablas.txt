  CREATE TABLE "LOG_ERRORES"
   (
	"PK_CODIGO_LOG_ERROR" NUMBER NOT NULL ENABLE, 
	"NOMBRE_PACKAGE" VARCHAR2(200 BYTE) NOT NULL ENABLE, 
	"NOMBRE_PROCEDIMIENTO" VARCHAR2(500 BYTE) NOT NULL ENABLE, 
	"PARAMETROS" CLOB, 
	"USUARIO_CREACION" VARCHAR2(500 BYTE), 
	"FECHA_CREACION" TIMESTAMP (6) WITH LOCAL TIME ZONE NOT NULL ENABLE, 	
	"CODIGO_RESPUESTA" VARCHAR2(20 BYTE), 
	"MENSAJE_RESPUESTA" CLOB, 	
	 CONSTRAINT "PK_CODIGO_LOG_ERROR" PRIMARY KEY ("PK_CODIGO_LOG_ERROR"));
 
 
 
CREATE SEQUENCE  "LOG_ERROR_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  ORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
 
 
 
  CREATE OR REPLACE EDITIONABLE TRIGGER "LOG_ERRORES_TRG" BEFORE
    INSERT ON LOG_ERRORES
    FOR EACH ROW
         WHEN (new.PK_CODIGO_LOG_ERROR IS NULL) BEGIN
    :new.PK_CODIGO_LOG_ERROR := LOG_ERROR_SEQ.nextval;
    :new.FECHA_CREACION:=sysdate;
	if :new.USUARIO_CREACION is null then 
    :new.USUARIO_CREACION:= user;
	end if;
END;

/



  CREATE TABLE "MARCAS"
   (
	"PK_MARCAS" NUMBER NOT NULL ENABLE, 
	"NOMBRE_MARCAS" VARCHAR2(200 BYTE), 
	"USUARIO_CREACION" VARCHAR2(500 BYTE), 
	"FECHA_CREACION" TIMESTAMP (6) WITH LOCAL TIME ZONE NOT NULL ENABLE, 	
	 CONSTRAINT "PK_MARCAS" PRIMARY KEY ("PK_MARCAS"));
 


CREATE SEQUENCE  "MARCAS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  ORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
 
 
 
  CREATE OR REPLACE EDITIONABLE TRIGGER "MARCAS_TRG" BEFORE
    INSERT ON MARCAS
    FOR EACH ROW
         WHEN (new.PK_MARCAS IS NULL) BEGIN
    :new.PK_MARCAS := MARCAS_SEQ.nextval;
    :new.FECHA_CREACION:=sysdate;
	if :new.USUARIO_CREACION is null then 
    :new.USUARIO_CREACION:= user;
	end if;
END;

/


  CREATE TABLE "CLIENTE"
   (
   
    "TIPO_DOCUMENTO" VARCHAR2(5 BYTE) NOT NULL ENABLE, 
    "DOCUMENTO" NUMBER  NOT NULL ENABLE, 
    "PRIMER_NOMBRE" VARCHAR2(200 BYTE) NOT NULL ENABLE, 
    "SEGUNDO_NOMBRE" VARCHAR2(200 BYTE) , 
    "PRIMER_APELLIDO" VARCHAR2(200 BYTE) NOT NULL ENABLE, 
    "SEGUNDO_APELLIDO" VARCHAR2(200 BYTE) , 
    "CELULAR" VARCHAR2(200 BYTE) , 
    "DIRECCION" VARCHAR2(200 BYTE) , 
    "CORREO" VARCHAR2(200 BYTE) ,     
	"USUARIO_CREACION" VARCHAR2(500 BYTE), 
	"FECHA_CREACION" TIMESTAMP (6) WITH LOCAL TIME ZONE NOT NULL ENABLE);
 
ALTER TABLE CLIENTE
ADD CONSTRAINT documentos_unicos
UNIQUE (TIPO_DOCUMENTO, DOCUMENTO);

 
  CREATE OR REPLACE EDITIONABLE TRIGGER "CLIENTE_TRG" BEFORE
    INSERT ON CLIENTE
    FOR EACH ROW
         BEGIN
    :new.FECHA_CREACION:=sysdate;
	if :new.USUARIO_CREACION is null then 
    :new.USUARIO_CREACION:= user;
	end if;
END;
/

  
  CREATE TABLE "VEHICULOS"
   ( 
    "PLACA" VARCHAR2(8 BYTE) NOT NULL ENABLE, 
    "COLOR"  VARCHAR2(30 BYTE) NOT NULL ENABLE,  
    "PK_MARCA" NUMBER NOT NULL ENABLE, 
    "TIPO_DOCUMENTO" VARCHAR2(200 BYTE) , 
    "DOCUMENTO" NUMBER NOT NULL ENABLE, 
	"USUARIO_CREACION" VARCHAR2(500 BYTE), 
	"FECHA_CREACION" TIMESTAMP (6) WITH LOCAL TIME ZONE NOT NULL ENABLE);
	
ALTER TABLE VEHICULOS
ADD CONSTRAINT PLACA_UNICA
UNIQUE (PLACA);	
 
ALTER TABLE VEHICULOS
ADD CONSTRAINT fk_cliente FOREIGN KEY (TIPO_DOCUMENTO, DOCUMENTO)
REFERENCES cliente (TIPO_DOCUMENTO, DOCUMENTO);

 
  CREATE OR REPLACE EDITIONABLE TRIGGER "VEHICULOS_TRG" BEFORE
    INSERT ON VEHICULOS
    FOR EACH ROW
         BEGIN
    :new.FECHA_CREACION:=sysdate;
	if :new.USUARIO_CREACION is null then 
    :new.USUARIO_CREACION:= user;
	end if;
END;
/



  CREATE TABLE "SERVICIOS_X_MANTENIMIENTO"
   ( 
	"PK_SERVICIOSXMANTENIMIENTO" NUMBER NOT NULL ENABLE, 
	"TIEMPO_ESTIMADO" NUMBER NOT NULL ENABLE, 
	"PK_SERVICIO" NUMBER NOT NULL ENABLE, 
    "PK_MANTENIMIENTO" NUMBER NOT NULL ENABLE,
	"USUARIO_CREACION" VARCHAR2(500 BYTE), 
	"FECHA_CREACION" TIMESTAMP (6) WITH LOCAL TIME ZONE NOT NULL ENABLE,
     CONSTRAINT "PK_SERVICIOSXMANTENIMIENTO" PRIMARY KEY ("PK_SERVICIOSXMANTENIMIENTO"));
    
    
CREATE SEQUENCE  "SERVICIOS_X_MANTENIMIENTO_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  ORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
 
 
  CREATE OR REPLACE EDITIONABLE TRIGGER "SERVICIOS_X_MANTENIMIENTO_TRG" BEFORE
    INSERT ON SERVICIOS_X_MANTENIMIENTO
    FOR EACH ROW
         WHEN (new.PK_SERVICIOSXMANTENIMIENTO IS NULL) BEGIN
    :new.PK_SERVICIOSXMANTENIMIENTO := SERVICIOS_SEQ.nextval;
    :new.FECHA_CREACION:=sysdate;
	if :new.USUARIO_CREACION is null then 
    :new.USUARIO_CREACION:= user;
	end if;
END;
/



  CREATE TABLE "MANTENIMIENTOS"
   ( 
	"PK_MANTENIMIENTOS" NUMBER NOT NULL ENABLE, 
	"ESTADO" NUMBER DEFAULT 0, 
	"PK_PLACA" VARCHAR2(8 BYTE) NOT NULL ENABLE, 
    "MEC_TIPO_DOCUMENTO" VARCHAR2(2 BYTE) ,
     "MEC_DOCUMENTO" NUMBER ,
	"USUARIO_CREACION" VARCHAR2(500 BYTE), 
	"FECHA_CREACION" TIMESTAMP (6) WITH LOCAL TIME ZONE NOT NULL ENABLE,
     CONSTRAINT "PK_MANTENIMIENTOS" PRIMARY KEY ("PK_MANTENIMIENTOS"));
    
    
CREATE SEQUENCE  "MANTENIMIENTOS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  ORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
 
 
  CREATE OR REPLACE EDITIONABLE TRIGGER "MANTENIMIENTOS_TRG" BEFORE
    INSERT ON MANTENIMIENTOS
    FOR EACH ROW
         WHEN (new.PK_MANTENIMIENTOS IS NULL) BEGIN
    :new.PK_MANTENIMIENTOS := MANTENIMIENTOS_SEQ.nextval;
    :new.FECHA_CREACION:=sysdate;
	if :new.USUARIO_CREACION is null then 
    :new.USUARIO_CREACION:= user;
	end if;
END;
/

ALTER TABLE MANTENIMIENTOS
ADD CONSTRAINT FK_MECANICOS FOREIGN KEY (MEC_TIPO_DOCUMENTO, MEC_DOCUMENTO)
REFERENCES MECANICOS (TIPO_DOCUMENTO, DOCUMENTO); 

 ALTER TABLE MANTENIMIENTOS
ADD CONSTRAINT FK_PLACAS FOREIGN KEY (PK_PLACA)
REFERENCES VEHICULOS (PLACA);    





  CREATE TABLE "FOTOS"
   ( 
	"PK_FOTOS" NUMBER NOT NULL ENABLE, 
	"RUTA" VARCHAR2(500 BYTE) NOT NULL ENABLE, 
	"PK_MANTENIMIENTO" NUMBER NOT NULL ENABLE, 
    "USUARIO_CREACION" VARCHAR2(500 BYTE), 
	"FECHA_CREACION" TIMESTAMP (6) WITH LOCAL TIME ZONE NOT NULL ENABLE,
     CONSTRAINT "PK_FOTOS" PRIMARY KEY ("PK_FOTOS"));

    
CREATE SEQUENCE  "FOTOS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  ORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
 
 
  CREATE OR REPLACE EDITIONABLE TRIGGER "FOTOS_TRG" BEFORE
    INSERT ON FOTOS
    FOR EACH ROW
         WHEN (new.PK_FOTOS IS NULL) BEGIN
    :new.PK_FOTOS := FOTOS_SEQ.nextval;
    :new.FECHA_CREACION:=sysdate;
	if :new.USUARIO_CREACION is null then 
    :new.USUARIO_CREACION:= user;
	end if;
END;
/

 ALTER TABLE FOTOS
ADD CONSTRAINT PK_MANTENIMIENTO FOREIGN KEY (PK_MANTENIMIENTO)
REFERENCES MANTENIMIENTOS (PK_MANTENIMIENTOS); 



  CREATE TABLE "REPUESTOS"
   ( 
	"PK_REPUESTO" NUMBER NOT NULL ENABLE, 
	"NOMBRE_REPUESTO" VARCHAR2(500 BYTE) NOT NULL ENABLE, 
	"PRECIO_RESPUESTO" NUMBER NOT NULL ENABLE, 
    "UNIDADES_INVENTARIO" NUMBER NOT NULL ENABLE, 
    "PROVEEDOR" VARCHAR2(500 BYTE) NOT NULL ENABLE, 
    "USUARIO_CREACION" VARCHAR2(500 BYTE), 
	"FECHA_CREACION" TIMESTAMP (6) WITH LOCAL TIME ZONE NOT NULL ENABLE,
     CONSTRAINT "PK_REPUESTO" PRIMARY KEY ("PK_REPUESTO"));


CREATE SEQUENCE  "REPUESTOS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  ORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
 
 
  CREATE OR REPLACE EDITIONABLE TRIGGER "REPUESTOS_TRG" BEFORE
    INSERT ON REPUESTOS
    FOR EACH ROW
         WHEN (new.PK_REPUESTO IS NULL) BEGIN
    :new.PK_REPUESTO := REPUESTOS_SEQ.nextval;
    :new.FECHA_CREACION:=sysdate;
	if :new.USUARIO_CREACION is null then 
    :new.USUARIO_CREACION:= user;
	end if;
END;
/




  CREATE TABLE "REPUESTOS_X_MANTENIMIENTOS"
   ( 
	"PK_REPUESTOSXMANTENIMIENTO" NUMBER NOT NULL ENABLE, 
	"UNIDADES" NUMBER NOT NULL ENABLE, 
	"TIEMPO_ESTIMADO" NUMBER NOT NULL ENABLE, 
    "PK_REPUESTO" NUMBER NOT NULL ENABLE, 
    "PK_MANTENIMIENTO" NUMBER NOT NULL ENABLE, 
    "USUARIO_CREACION" VARCHAR2(500 BYTE), 
	"FECHA_CREACION" TIMESTAMP (6) WITH LOCAL TIME ZONE NOT NULL ENABLE,
     CONSTRAINT "PK_REPUESTOSXMANTENIMIENTO" PRIMARY KEY ("PK_REPUESTOSXMANTENIMIENTO"));


CREATE SEQUENCE  "REPUESTOSXMANTENIMIENTO_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  ORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
 
 
  CREATE OR REPLACE EDITIONABLE TRIGGER "REPUESTOSXMANTENIMIENTO_TRG" BEFORE
    INSERT ON REPUESTOS_X_MANTENIMIENTOS
    FOR EACH ROW
         WHEN (new.PK_REPUESTOSXMANTENIMIENTO IS NULL) BEGIN
    :new.PK_REPUESTOSXMANTENIMIENTO := REPUESTOSXMANTENIMIENTO_SEQ.nextval;
    :new.FECHA_CREACION:=sysdate;
	if :new.USUARIO_CREACION is null then 
    :new.USUARIO_CREACION:= user;
	end if;
END;
/

 ALTER TABLE REPUESTOS_X_MANTENIMIENTOS
ADD CONSTRAINT FK_REPUESTO FOREIGN KEY (PK_REPUESTO)
REFERENCES REPUESTOS (PK_REPUESTO); 

 ALTER TABLE REPUESTOS_X_MANTENIMIENTOS
ADD CONSTRAINT FK_MANTENIMIENTO_REPUESTOS FOREIGN KEY (PK_MANTENIMIENTO)
REFERENCES MANTENIMIENTOS (PK_MANTENIMIENTOS);

 ALTER TABLE SERVICIOS_X_MANTENIMIENTO
ADD CONSTRAINT FK_MANTENIMIENTO_SERVICIOS FOREIGN KEY (PK_MANTENIMIENTO)
REFERENCES MANTENIMIENTOS (PK_MANTENIMIENTOS);

 ALTER TABLE SERVICIOS_X_MANTENIMIENTO
ADD CONSTRAINT FK_SERVICIOS FOREIGN KEY (PK_SERVICIO)
REFERENCES SERVICIOS (PK_SERVICIOS);

 ALTER TABLE VEHICULOS
ADD CONSTRAINT FK_MARCAS FOREIGN KEY (PK_MARCA)
REFERENCES MARCAS (PK_MARCAS);


  CREATE OR REPLACE EDITIONABLE TRIGGER "MECANICO_TRG" BEFORE
    INSERT ON MECANICOS
    FOR EACH ROW
         BEGIN
    :new.FECHA_CREACION:=sysdate;
	if :new.USUARIO_CREACION is null then 
    :new.USUARIO_CREACION:= user;
	end if;
END;
/
